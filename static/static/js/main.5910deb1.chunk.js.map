{"version":3,"sources":["logo.svg","LineChart.js","App.js","reportWebVitals.js","index.js"],"names":["LineChart","dataList","chartRef","gameId","useRef","useState","echartsInstance","setEchartsInstance","useEffect","current","echarts","showLineColor","list","arr","length","colors","start","index","quarter","push","gte","lt","color","lte","gt","option","tooltip","trigger","axisPointer","type","xAxis","boundaryGap","data","map","item","moment","Date","time","format","yAxis","visualMap","show","dimension","pieces","series","name","smooth","totalScore","setOption","ref","style","width","height","HOST","App","gameList","setGameList","gameData","setGameData","setInterval","a","fetch","res","json","result","curData","game","filter","forEach","element","i","getTime","className","gutter","margin","gameInfo","marginBottom","xs","span","sm","xl","marginRight","homeName","marginLeft","awayName","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5910deb1.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import React, { useEffect, useRef, useState } from 'react';\r\nimport moment from 'moment';\r\nimport * as echarts from 'echarts';\r\n\r\n\r\nconst LineChart = ({ dataList, gameId }) => {\r\n\tconst chartRef = useRef(null)\r\n\tconst [echartsInstance, setEchartsInstance] = useState(null)\r\n\tuseEffect(() => {\r\n\t\tif (chartRef.current) {\r\n\t\t\tsetEchartsInstance(echarts.init(chartRef.current))\r\n\t\t}\r\n\t}, [])\r\n\tconst showLineColor = (list) => {\r\n\t\tlet arr = []\r\n\t\tif(list.length != 0) {\r\n\t\t\tlet colors = ['red','green','blue','yellow']\r\n\t\t\tvar start = 0\r\n\t\t\tfor (let index = 0; index < list.length ; index++) {\r\n\t\t\t\tif(index === list.length-1  || list[index].quarter != list[start].quarter) {\r\n\t\t\t\t\tarr.push({ gte: start, lt: index, color: colors[arr.length]})\r\n\t\t\t\t\tstart = index\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tarr.push({lte: 100, color: \"red\"})\r\n\t\t\tarr.push({gt: 100, lte: 200, color: \"green\"})\r\n\t\t\tarr.push({gt: 200, lte: 300, color: \"red\"})\r\n\t\t\tarr.push({gt: 300, color: \"red\"})\r\n\t\t}\r\n\t\t\r\n\r\n\t\t// let cut = Math.ceil(list.length / 100)\r\n\t\t// for (let index = 0; index < cut; index++) {\r\n\t\t// \tif (index % 2 === 0) {\r\n\t\t// \t\tif (index === 0) {\r\n\t\t// \t\t\tarr.push({ lte: (index + 1) * 100, color: 'red' })\r\n\t\t// \t\t} else {\r\n\t\t// \t\t\tarr.push({ gt: index * 100, lte: (index + 1) * 100, color: 'red' })\r\n\t\t// \t\t}\r\n\t\t// \t} else {\r\n\t\t// \t\tif(index === cut-1){\r\n\t\t// \t\t\tarr.push({ gt: (index + 2) * 100, color: 'green' })\r\n\t\t// \t\t}else{\r\n\t\t// \t\t\tarr.push({ gt: index * 100, lte: (index + 1) * 100, color: 'green' })\r\n\t\t// \t\t}\r\n\t\t// \t}\r\n\t\t// }\r\n\t\treturn arr\r\n\t}\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\tif(dataList.length===0) return\r\n\t\tconst option = {\r\n\t\t\ttooltip: {\r\n\t\t\t\ttrigger: 'axis',\r\n\t\t\t\taxisPointer: {\r\n\t\t\t\t\ttype: 'cross'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\txAxis: {\r\n\t\t\t\ttype: 'category',\r\n\t\t\t\tboundaryGap: false,\r\n\t\t\t\t// prettier-ignore\r\n\t\t\t\tdata: dataList.map(item => moment(new Date(item.time)).format('h:mm:ss')),\r\n\t\t\t},\r\n\t\t\tyAxis: {\r\n\t\t\t\ttype: 'value',\r\n\t\t\t},\r\n\t\t\tvisualMap: {\r\n\t\t\t\tshow: false,\r\n\t\t\t\tdimension: 0,\r\n\t\t\t\tpieces: showLineColor(dataList)\r\n\t\t\t},\r\n\t\t\tseries: [\r\n\t\t\t\t{\r\n\t\t\t\t\tname: '总得分',\r\n\t\t\t\t\ttype: 'line',\r\n\t\t\t\t\tsmooth: true,\r\n\t\t\t\t\tdata: dataList.map(item => item.totalScore)\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t};\r\n\t\techartsInstance?.setOption(option)\r\n\t}, [echartsInstance, dataList])\r\n\treturn <div ref={chartRef} style={{ width: '100%', height: 400 }}></div>\r\n};\r\n\r\nexport default LineChart;","import logo from './logo.svg';\nimport './App.css';\nimport 'antd/dist/antd.css'\nimport LineChart from './LineChart';\nimport React, { useState, useEffect } from 'react';\nimport { notification, Row, Col } from 'antd';\n\nconst HOST = 'localhost' // \"47.93.48.15\" //\n// const HOST = document.location.host.split(\":\")[0] // \"47.93.48.15\" //\n\nfunction App() {\n  let [gameList, setGameList] = useState([])\n\n  let [gameData, setGameData] = useState({})\n  useEffect(() => {\n    setInterval(async () => {\n      try {\n        let res = await fetch(`http://${HOST}:8080/gameList`)\n        let result = await res.json()\n        setGameList(result[\"info\"]) \n      } catch (err) {\n        // notification.open({\n        //   message: '服务端错误',\n        //   description: err,\n        // });\n      }\n    }, 2000)\n  }, [])\n\n  useEffect(async () => {\n    let curData = {}\n    for (let game of gameList) {\n      try {\n        let gameId = game.gameId\n        let res = await fetch(`http://${HOST}:8080/game/${gameId}`)\n        let result = await res.json()\n        var filter = []\n        result.forEach((element,i)=> {\n            if(i === 0) {\n              filter.push(element)\n            } else if(filter[filter.length-1].totalScore != element.totalScore || filter[filter.length-1].quarter != element.quarter || new Date(element.time).getTime() -  new Date(filter[filter.length-1].time).getTime() >= 1000*59+500) {\n              filter.push(element)\n            }\n        });\n        curData[gameId] = filter\n      } catch(err) {\n        // notification.open({\n        //   message: '服务端错误',\n        //   description: err,\n        // });\n      }\n    }\n    setGameData(curData)\n  }, [gameList])\n\n  return (\n    <div className=\"App\">\n      <Row gutter={16} margin={0}>\n        {gameList.map(gameInfo => (\n            <Col className=\"gutter-row\" style={{marginBottom: 10}} xs={{span: 24}} sm={{span: 12}} xl={{span: 8}}>\n              <header>\n                {gameInfo.name}\n              </header>\n              <header>\n                <span style={{marginRight: 10, color: \"#0066cc\"}}>{gameInfo.homeName}</span>\n                VS\n                <span style={{marginLeft: 10, color: \"#cc0000\"}}>{gameInfo.awayName}</span>\n              </header>\n              <LineChart gameId={gameInfo.gameId} dataList={gameData[gameInfo.gameId] || []}/>\n            </Col>\n        ))}\n      </Row>\n      \n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}